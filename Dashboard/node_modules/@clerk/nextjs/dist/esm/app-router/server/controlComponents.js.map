{"version":3,"sources":["../../../../src/app-router/server/controlComponents.tsx"],"sourcesContent":["import type { experimental__CheckAuthorizationWithoutPermission } from '@clerk/types';\nimport { redirect } from 'next/navigation';\nimport React from 'react';\n\nimport { auth } from './auth';\n\nexport function SignedIn(props: React.PropsWithChildren) {\n  const { children } = props;\n  const { userId } = auth();\n  return userId ? <>{children}</> : null;\n}\n\nexport function SignedOut(props: React.PropsWithChildren) {\n  const { children } = props;\n  const { userId } = auth();\n  return userId ? null : <>{children}</>;\n}\n\ntype GateServerComponentProps = React.PropsWithChildren<\n  Parameters<experimental__CheckAuthorizationWithoutPermission>[0] & {\n    fallback?: React.ReactNode;\n    redirectTo?: string;\n  }\n>;\n\n/**\n * @experimental The component is experimental and subject to change in future releases.\n */\nexport function experimental__Gate(gateProps: GateServerComponentProps) {\n  const { children, fallback, redirectTo, ...restAuthorizedParams } = gateProps;\n  const { experimental__has } = auth();\n\n  const isAuthorizedUser = experimental__has(restAuthorizedParams);\n\n  const handleFallback = () => {\n    if (!redirectTo && !fallback) {\n      throw new Error('Provide `<Gate />` with a `fallback` or `redirectTo`');\n    }\n\n    if (redirectTo) {\n      return redirect(redirectTo);\n    }\n\n    return <>{fallback}</>;\n  };\n\n  if (!isAuthorizedUser) {\n    return handleFallback();\n  }\n\n  return <>{children}</>;\n}\n"],"mappings":"AACA,SAAS,gBAAgB;AACzB,OAAO,WAAW;AAElB,SAAS,YAAY;AAEd,SAAS,SAAS,OAAgC;AACvD,QAAM,EAAE,SAAS,IAAI;AACrB,QAAM,EAAE,OAAO,IAAI,KAAK;AACxB,SAAO,SAAS,0DAAG,QAAS,IAAM;AACpC;AAEO,SAAS,UAAU,OAAgC;AACxD,QAAM,EAAE,SAAS,IAAI;AACrB,QAAM,EAAE,OAAO,IAAI,KAAK;AACxB,SAAO,SAAS,OAAO,0DAAG,QAAS;AACrC;AAYO,SAAS,mBAAmB,WAAqC;AACtE,QAAM,EAAE,UAAU,UAAU,YAAY,GAAG,qBAAqB,IAAI;AACpE,QAAM,EAAE,kBAAkB,IAAI,KAAK;AAEnC,QAAM,mBAAmB,kBAAkB,oBAAoB;AAE/D,QAAM,iBAAiB,MAAM;AAC3B,QAAI,CAAC,cAAc,CAAC,UAAU;AAC5B,YAAM,IAAI,MAAM,sDAAsD;AAAA,IACxE;AAEA,QAAI,YAAY;AACd,aAAO,SAAS,UAAU;AAAA,IAC5B;AAEA,WAAO,0DAAG,QAAS;AAAA,EACrB;AAEA,MAAI,CAAC,kBAAkB;AACrB,WAAO,eAAe;AAAA,EACxB;AAEA,SAAO,0DAAG,QAAS;AACrB;","names":[]}